.\"############################################################################
.\"# SPDX-FileComment: Man page for kz-install
.\"#
.\"# SPDX-FileCopyrightText: Karel Zimmer <info@karelzimmer.nl>
.\"# SPDX-License-Identifier: CC0-1.0
.\"############################################################################

.TH "KZ-INSTALL" "1" "4.2.1" "kz" "User commands"

.SH NAME
kz-install - Install apps

.SH SYNOPSIS
.SY kz\ install
[<options>] [--] [\fI<app>\fR...]
.YS

.SH DESCRIPTION
\fBkz install\fR installs apps and changes system settings.
.sp
In a desktop environment command \fBkz install\fR can be executed by searching
for \fBapps\fR, click on \fBApps install\fR.
.sp
First install Linux, \fBkz install\fR is a post install script.
.sp
Use \fBkz setup\fR (after \fBkz install\fR) to set up apps and change user
settings.
.sp
\fBkz install\fR processes an install file that contains commands for
installing apps and changing system settings.
.sp
By default, \fBkz install\fR processes the install file /usr/bin/kz-install.sh,
which contains commands for all computers included in it.
.br
The commands that \fBkz install\fR provides are arranged in such a way that the
result remains the same even if they are executed repeatedly (idempotent).
.sp
When processing the install file, the commands for any and the current computer
are selected and copied to a command file.
.br
The commands in the command file are executed.
Upon successful completion the computer will restart.
.sp
For the format of the install file see \fBman kz-install.sh\fR.
.sp
Option \fB-a\fR, \fB--apps\fR lists all apps available in the install file.
.sp
Optionally, apps to be installed can be specified with argument \fI<app>\fR.
.br
Per specified app, the commands are selected from the install file and are
copied to the command file.
.sp
With option \fB-b\fR, \fB--browse\fR you can browse through the installation
file.
.sp
Option \fB-c\fR, \fB--cat\fR lists the contents of the command file.
.sp
With option \fB-f\fR, \fB--file\fR \fI<file>\fR another install file can be
specified.
.sp
With option \fB-g\fR, \fB--gui\fR, \fBkz install\fR is run in graphical mode. A
desktop environment is required.
.sp
With option \fB-r\fR, \fB--remove\fR the installation can be undone.
.sp
A -- signals the end of options and disables further option processing.
.sp
If the installation of apps fails for some reason, on a Debian-based system you
can try the following:
    sudo dpkg --configure --pending
    sudo apt-get update --fix-missing
    sudo apt-get install --fix-broken
.br
On a Red Hat-based system try the following:
    sudo dnf clean all
    sudo dnf makecache
.sp
Some computers require additional commands to complete the installation.
These commands may require sensitive information, such as a username.
For this reason, these commands are included in a password-protected file.
.br
If necessary, use the following command:
    gpg --decrypt /usr/bin/kz-install-extra.gpg | grep $HOSTNAME
.sp
This gpg file (GNU Privacy Guard, or GnuPG, or GPG) was previously created with
the command:
    gpg --symmetric kz-install-extra

.SH OPTIONS
Mandatory arguments to long options are mandatory for short options too.
.TP
\fI<app>\fR...
Install the specified apps.
.TP
\fB-a\fR, \fB--apps\fR
Show a list of apps to install.
.TP
\fB-b\fR, \fB--browse\fR
Browse through the install file.
.TP
\fB-c\fR, \fB--cat\fR
Display the contents of the command file.
.TP
\fB-f\fR, \fB--file\fR \fI<file>\fR
Process the specified file.
.TP
\fB-g\fR, \fB--gui\fR
Run in graphical mode (gui=graphical user interface). A desktop environment is
required.
.TP
\fB-r\fR, \fB--remove\fR
Remove the apps.
.TP
\fB-h\fR, \fB--help\fR
Show a short description of the available options.
.TP
\fB-m\fR, \fB--manual\fR
Show the manual page.
.TP
\fB-u\fR, \fB--usage\fR
Show the available options.
.TP
\fB-v\fR, \fB--version\fR
Show the version, author, and copyright.
.TP
\fB--\fR
Signals the end of options and disables further option processing.

.SH EXIT STATUS
Normally exit value 0 is returned; if an error occurs, the exit value is not
equal to 0.

.SH FILES
/usr/bin/kz-install.sh
.RS
Install file.
.RE
.sp
/usr/bin/kz-install.gpg
.RS
File containing possible additional manual commands. Only applicable to
non-default installations.
.RE
.sp
/tmp/kz-install-commands-XXXXXXXXXX
.RS
Command file, e.g. kz-install-commands-SYpGEKVWZI.
.RE
.sp
~/Settings/users.txt
.RS
Instructions for adding additional users.
.RE

.SH NOTES
.IP " 1." 4
Checklist install
.RS 4
.UR https://karelzimmer.nl/en
.UE
.RE
.IP " 2." 4
~/Settings/apps.txt
.RS 4
The apps file contains names of previously installed packages. This file can be
used to check the installation for completeness.
.RE
.IP " 3." 4
IaC and Day 1 Operations
.RS 4
\fBkz install\fR is mainly used for \fBIaC\fR and \fBDay 1 Operations\fR. See
\fBkz\fR(1) for an explanation.
.RE

.SH EXAMPLES
.EX
.sp
\fBkz install\fR
.RS
Install everything in the default install file.
Starter \fBApps install\fR is also available for this in a desktop environment.
.RE
.sp
\fBkz install google-chrome\fR
.RS
Install Google Chrome.
.RE
.sp
\fBkz install --remove google-chrome\fR
.RS
Remove Google Chrome.
.RE
.sp
\fBkz install --cat google-chrome\fR
.RS
Show install commands for Google Chrome.
.RE
.sp
\fBkz install --cat --remove google-chrome\fR
.RS
Show remove commands for Google Chrome.
.RE
.EE

.SH SEE ALSO
\fBkz\fR(1),
\fBkz_common.sh\fR(1),
\fBkz-menu\fR(1),
\fBkz-setup\fR(1),
\fBkz-update\fR(1),
\fBkz-install.sh\fR(7)
